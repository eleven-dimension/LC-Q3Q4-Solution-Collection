rating: 1964  
from: contest 79 Q4

thought of the solution after about 10-min consideration
build graph + Floyd  

wa n : edge cases  

shortest path with multiple sources can be solved by BFS too